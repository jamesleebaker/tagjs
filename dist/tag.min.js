var Tag=function(){function t(t){var e,r,i,n={};if(!t||t.length<1)return n;for(r=0,i=t.length;i>r;r+=1)e=t[r].replace(/['\"\[\]]/g,"").split("="),n[e[0]]=e[1];return n}function e(e){var r="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",i="[\\x20\\t\\r\\n\\f]",n=r.replace("w","w#"),s=e.match(new RegExp("("+r.replace("w","w*")+")")),a=e.match(new RegExp("\\.("+r+")","g")),o=e.match(new RegExp("#("+r+")")),h=e.match(new RegExp("\\["+i+"*("+r+")"+i+"*(?:([*^$|!~]?=)"+i+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+n+")|)|)"+i+"*\\]","g"));if(!s)throw"The selector provided does not supply a valid tag";return h=t(h),a=!a||a.length<1?"":a.join(" ").replace(/\./g,""),h["class"]=a,o=o?o[0].replace("#",""):void 0,h.id=o,{tag:s[0],classes:a.split(" "),id:o,attributes:h}}function r(t,e){var r=e.attributes;for(var i in r){var n=r[i];n&&t.setAttribute(i,n)}return t}function i(t){var e=document.createElement(t.name),n=document.createDocumentFragment();return t.children.forEach(function(t){n.appendChild(i(t))}),e.appendChild(n),r(e,t)}var n,s=/area|base|basefont|br|hr|input|img|link|meta/;return n=function(t){var r=e(t);this.name=r.tag,this.classes=r.classes,this.id=r.id,this.attributes=r.attributes,this.innerText="",this.children=[]},n.prototype.add=function(){var t,e,r=Array.prototype.slice.call(arguments);if(r.length)for(t=0,e=r.length;e>t;t+=1)this.children.push(r[t]);return this},n.prototype.addIf=function(t,e){return t?this.add(e):this},n.prototype.text=function(t){return this.innerText=String(t),this},n.prototype.addClass=function(t){var e=this.attributes["class"];return-1===this.classes.indexOf(t)&&(this.classes.push(t),e&&-1===e.indexOf(t)&&(this.attributes["class"]+=[" ",t].join(""))),this},n.prototype.removeClass=function(t){var e=this.attributes["class"],r=this.classes.indexOf(t),i=e.indexOf(t);return-1===r||e&&-1===i?this:(this.classes.splice(r,1),e=e.replace(t,""),this.attributes["class"]=0===i?e.replace(" ",""):e.slice(0,i-1),this)},n.prototype.removeClassIf=function(t,e){return t?this.removeClass(e):this},n.prototype.removeAttr=function(t){return delete this.attributes[t],this},n.prototype.removeAttrIf=function(t,e){return t?this.removeAttr(e):this},n.prototype.addAttr=function(t,e){var r;if("object"==typeof t){for(r in t)t.hasOwnProperty(r)&&!this.attributes[r]&&(this.attributes[r]=t[r]);return this}return this.attributes[t]=e,this},n.prototype.addAttrIf=function(t,e,r){return t?this.addAttr(e,r):this},n.prototype.addClassIf=function(t,e){return t?this.addClass(e):this},n.prototype.render=function(){var t,e,r,n="",a=this.attributes,o=["<",this.name],h=this.children,u=s.test(this.name);if(window&&window.document)return i(this);if(a)for(r in a)a.hasOwnProperty(r)&&a[r]&&o.push(" ",r,'="',a[r],'"');if(u){if(o.push(" />"),h.length)throw["Nested content was provided for the tag name: ",this.name].join("")}else{for(o.push(">"),t=0,e=h.length;e>t;t+=1)n+="string"==typeof h[t]?h[t]:h[t].render();this.innerText.length>0&&o.push(this.innerText),n.length>0&&o.push(n),o.push(["</",this.name,">"].join(""))}return o.join("")},function(t){return new n(t)}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRhZy5qcyJdLCJuYW1lcyI6WyJUYWciLCJ0b2tlbml6ZUF0dHJpYnV0ZXMiLCJhdHRycyIsInNwbGl0IiwiaSIsImoiLCJhdHRyaWJ1dGVzIiwibGVuZ3RoIiwicmVwbGFjZSIsInBhcnNlU2VsZWN0b3IiLCJzZWxlY3RvciIsImNoYXJhY3RlckVuY29kaW5nIiwid2hpdGVzcGFjZSIsImlkZW50aWZpZXIiLCJ0YWciLCJtYXRjaCIsIlJlZ0V4cCIsImNsYXNzZXMiLCJpZCIsImpvaW4iLCJ1bmRlZmluZWQiLCJzZXRFbGVtZW50QXR0cmlidXRlcyIsImVsZW1lbnQiLCJhdHRyIiwidmFsdWUiLCJzZXRBdHRyaWJ1dGUiLCJyZW5kZXJET01GcmFnbWVudCIsImNvbnRhaW5lciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm5hbWUiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJjaGlsZHJlbiIsImZvckVhY2giLCJjaGlsZCIsImFwcGVuZENoaWxkIiwiU0VMRl9DTE9TSU5HX1RBR1MiLCJlbGVtZW50VG9rZW5zIiwidGhpcyIsImlubmVyVGV4dCIsInByb3RvdHlwZSIsImFkZCIsImFyZ3MiLCJBcnJheSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsInB1c2giLCJhZGRJZiIsImNvbmRpdGlvbiIsInRleHQiLCJTdHJpbmciLCJhZGRDbGFzcyIsImNsYXNzTmFtZSIsImNsYXNzQXR0ciIsImluZGV4T2YiLCJyZW1vdmVDbGFzcyIsImNsYXNzSW5kZXgiLCJjbGFzc0F0dHJJbmRleCIsInNwbGljZSIsInJlbW92ZUNsYXNzSWYiLCJyZW1vdmVBdHRyIiwiYXR0cmlidXRlIiwicmVtb3ZlQXR0cklmIiwiYWRkQXR0ciIsImhhc093blByb3BlcnR5IiwiYWRkQXR0cklmIiwiYWRkQ2xhc3NJZiIsInJlbmRlciIsImlubmVySHRtbCIsIm1hcmt1cCIsImlzU2VsZkNsb3NpbmciLCJ0ZXN0Iiwid2luZG93Il0sIm1hcHBpbmdz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VCxLQUFNLEtBQUtYLEtBQUssS0FHMUMsTUFBT29ELEdBQU9wRCxLQUFLLEtBR2QsU0FBU1QsR0FDZCxNQUFPLElBQUlWLEdBQUlVIiwiZmlsZSI6InRhZy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmpzbGludCBzbG9wcHk6IHRydWUsIHRvZG86IHRydWUsIHdoaXRlOiB0cnVlICovXG52YXIgVGFnID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBTRUxGX0NMT1NJTkdfVEFHUyA9IC9hcmVhfGJhc2V8YmFzZWZvbnR8YnJ8aHJ8aW5wdXR8aW1nfGxpbmt8bWV0YS8sXG4gIFRhZztcblxuICBmdW5jdGlvbiB0b2tlbml6ZUF0dHJpYnV0ZXMoYXR0cnMpIHtcbiAgICB2YXIgYXR0cmlidXRlcyA9IHt9LFxuICAgICAgc3BsaXQsXG4gICAgICBpLFxuICAgICAgajtcblxuICAgIGlmKCFhdHRycyB8fCBhdHRycy5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm4gYXR0cmlidXRlcztcbiAgICB9XG5cbiAgICBmb3IgKGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSArPSAxKSB7XG4gICAgICBzcGxpdCA9IGF0dHJzW2ldLnJlcGxhY2UoL1snXFxcIlxcW1xcXV0vZywgJycpLnNwbGl0KCc9Jyk7XG4gICAgICBhdHRyaWJ1dGVzW3NwbGl0WzBdXSA9IHNwbGl0WzFdO1xuICAgIH1cblxuICAgIHJldHVybiBhdHRyaWJ1dGVzO1xuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VTZWxlY3RvcihzZWxlY3Rvcikge1xuICAgIHZhciBjaGFyYWN0ZXJFbmNvZGluZyA9ICcoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKSsnLFxuICAgICAgd2hpdGVzcGFjZSA9ICdbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXScsXG4gICAgICBpZGVudGlmaWVyID0gY2hhcmFjdGVyRW5jb2RpbmcucmVwbGFjZSgndycsICd3IycpLFxuICAgICAgdGFnID0gc2VsZWN0b3IubWF0Y2gobmV3IFJlZ0V4cCgnKCcgKyBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCd3JywgJ3cqJyApICsgJyknKSksXG4gICAgICAvL1RPRE86IENsYXNzZXMgUmVnRXggbmVlZHMgdG8gYWNjb3VudCBmb3IgVVJMcyBhbmQgb3RoZXIgJ3BlcmlvZHMnIGluIHRoZSBzZWxlY3RvciB0aGF0IGFyZW4ndCBjbGFzc2VzXG4gICAgICBjbGFzc2VzID0gc2VsZWN0b3IubWF0Y2gobmV3IFJlZ0V4cCgnXFxcXC4oJyArIGNoYXJhY3RlckVuY29kaW5nICsgJyknLCAnZycpKSxcbiAgICAgIGlkID0gc2VsZWN0b3IubWF0Y2gobmV3IFJlZ0V4cCggJyMoJyArIGNoYXJhY3RlckVuY29kaW5nICsgJyknKSksXG4gICAgICBhdHRyaWJ1dGVzID0gc2VsZWN0b3IubWF0Y2gobmV3IFJlZ0V4cCggXCJcXFxcW1wiICsgd2hpdGVzcGFjZSArIFwiKihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86KFsqXiR8IX5dPz0pXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86KFsnXFxcIl0pKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXSkqPylcXFxcM3woXCIgKyBpZGVudGlmaWVyICsgXCIpfCl8KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiKSk7XG5cbiAgICBpZighdGFnKSB7XG4gICAgICB0aHJvdyAnVGhlIHNlbGVjdG9yIHByb3ZpZGVkIGRvZXMgbm90IHN1cHBseSBhIHZhbGlkIHRhZyc7XG4gICAgfVxuXG4gICAgYXR0cmlidXRlcyA9IHRva2VuaXplQXR0cmlidXRlcyhhdHRyaWJ1dGVzKTtcbiAgICBjbGFzc2VzID0gIWNsYXNzZXMgfHwgY2xhc3Nlcy5sZW5ndGggPCAxID8gJycgOiBjbGFzc2VzLmpvaW4oJyAnKS5yZXBsYWNlKC9cXC4vZywgJycpO1xuICAgIGF0dHJpYnV0ZXNbJ2NsYXNzJ10gPSBjbGFzc2VzO1xuICAgIGlkID0gIWlkID8gdW5kZWZpbmVkIDogaWRbMF0ucmVwbGFjZSgnIycsICcnKTtcbiAgICBhdHRyaWJ1dGVzWydpZCddID0gaWQ7XG5cbiAgICAvL1RPRE86XG4gICAgLy8gLSBDb25jYXQgYXR0cmlidXRlcyB3aXRoIGlkIGFuZCBjbGFzc2VzIGJlZm9yZSByZXR1cm5pbmdcbiAgICByZXR1cm4ge1xuICAgICAgdGFnIDogdGFnWzBdLFxuICAgICAgY2xhc3NlcyA6IGNsYXNzZXMuc3BsaXQoJyAnKSxcbiAgICAgIGlkIDogaWQsXG4gICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEVsZW1lbnRBdHRyaWJ1dGVzKGVsZW1lbnQsIHRhZykge1xuICAgIHZhciBhdHRyaWJ1dGVzID0gdGFnLmF0dHJpYnV0ZXM7XG5cbiAgICBmb3IodmFyIGF0dHIgaW4gYXR0cmlidXRlcykge1xuICAgICAgdmFyIHZhbHVlID0gYXR0cmlidXRlc1thdHRyXTtcblxuICAgICAgaWYodmFsdWUpIHtcbiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyRE9NRnJhZ21lbnQodGFnKSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnLm5hbWUpLFxuICAgICAgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICB0YWcuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbihjaGlsZCkge1xuICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocmVuZGVyRE9NRnJhZ21lbnQoY2hpbGQpKTtcbiAgICB9KTtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgcmV0dXJuIHNldEVsZW1lbnRBdHRyaWJ1dGVzKGNvbnRhaW5lciwgdGFnKTtcbiAgfVxuXG4gIFRhZyA9IGZ1bmN0aW9uKHNlbGVjdG9yKXtcbiAgICB2YXIgZWxlbWVudFRva2VucyA9IHBhcnNlU2VsZWN0b3Ioc2VsZWN0b3IpO1xuXG4gICAgdGhpcy5uYW1lID0gZWxlbWVudFRva2Vucy50YWc7XG4gICAgdGhpcy5jbGFzc2VzID0gZWxlbWVudFRva2Vucy5jbGFzc2VzO1xuICAgIHRoaXMuaWQgPSBlbGVtZW50VG9rZW5zLmlkO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IGVsZW1lbnRUb2tlbnMuYXR0cmlidXRlcztcbiAgICB0aGlzLmlubmVyVGV4dCA9ICcnO1xuICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgfTtcblxuICAvL1RPRE86IFByb3ZpZGUgYSB3YXkgdG8gcGFzcyBpbiBhdHRyaWJ1dGVzIGFzIHBhcmFtc1xuICBUYWcucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLFxuICAgICAgaSwgajtcblxuICAgIGlmKGFyZ3MubGVuZ3RoKSB7XG4gICAgICBmb3IgKGkgPSAwLCBqID0gYXJncy5sZW5ndGg7IGkgPCBqOyBpICs9IDEpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGFyZ3NbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFRhZy5wcm90b3R5cGUuYWRkSWYgPSBmdW5jdGlvbihjb25kaXRpb24sIHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIGNvbmRpdGlvblxuICAgICAgPyB0aGlzLmFkZChzZWxlY3RvcilcbiAgICAgIDogdGhpcztcbiAgfTtcblxuICBUYWcucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgdGhpcy5pbm5lclRleHQgPSBTdHJpbmcodGV4dCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgVGFnLnByb3RvdHlwZS5hZGRDbGFzcyA9IGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xuICAgIHZhciBjbGFzc0F0dHIgPSB0aGlzLmF0dHJpYnV0ZXNbJ2NsYXNzJ107XG5cbiAgICBpZih0aGlzLmNsYXNzZXMuaW5kZXhPZihjbGFzc05hbWUpID09PSAtMSkge1xuICAgICAgdGhpcy5jbGFzc2VzLnB1c2goY2xhc3NOYW1lKTtcblxuICAgICAgaWYoY2xhc3NBdHRyICYmIGNsYXNzQXR0ci5pbmRleE9mKGNsYXNzTmFtZSkgPT09IC0xKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlc1snY2xhc3MnXSArPSBbJyAnLCBjbGFzc05hbWVdLmpvaW4oJycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFRhZy5wcm90b3R5cGUucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbihjbGFzc05hbWUpIHtcbiAgICB2YXIgY2xhc3NBdHRyID0gdGhpcy5hdHRyaWJ1dGVzWydjbGFzcyddLFxuICAgICAgY2xhc3NJbmRleCA9IHRoaXMuY2xhc3Nlcy5pbmRleE9mKGNsYXNzTmFtZSksXG4gICAgICBjbGFzc0F0dHJJbmRleCA9IGNsYXNzQXR0ci5pbmRleE9mKGNsYXNzTmFtZSk7XG5cbiAgICBpZihjbGFzc0luZGV4ID09PSAtMSB8fCAoY2xhc3NBdHRyICYmIGNsYXNzQXR0ckluZGV4ID09PSAtMSkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIHRoaXMuY2xhc3Nlcy5zcGxpY2UoY2xhc3NJbmRleCwgMSk7XG4gICAgY2xhc3NBdHRyID0gY2xhc3NBdHRyLnJlcGxhY2UoY2xhc3NOYW1lLCAnJyk7XG5cbiAgICB0aGlzLmF0dHJpYnV0ZXNbJ2NsYXNzJ10gPSBjbGFzc0F0dHJJbmRleCA9PT0gMFxuICAgICAgPyBjbGFzc0F0dHIucmVwbGFjZSgnICcsICcnKVxuICAgICAgOiBjbGFzc0F0dHIuc2xpY2UoMCwgY2xhc3NBdHRySW5kZXggLSAxKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFRhZy5wcm90b3R5cGUucmVtb3ZlQ2xhc3NJZiA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIGNvbmRpdGlvblxuICAgICAgPyB0aGlzLnJlbW92ZUNsYXNzKGNsYXNzTmFtZSlcbiAgICAgIDogdGhpcztcbiAgfTtcblxuICBUYWcucHJvdG90eXBlLnJlbW92ZUF0dHIgPSBmdW5jdGlvbihhdHRyaWJ1dGUpIHtcbiAgICBkZWxldGUgdGhpcy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgVGFnLnByb3RvdHlwZS5yZW1vdmVBdHRySWYgPSBmdW5jdGlvbihjb25kaXRpb24sIGF0dHJpYnV0ZSkge1xuICAgIHJldHVybiBjb25kaXRpb25cbiAgICAgID8gdGhpcy5yZW1vdmVBdHRyKGF0dHJpYnV0ZSlcbiAgICAgIDogdGhpcztcbiAgfTtcblxuICBUYWcucHJvdG90eXBlLmFkZEF0dHIgPSBmdW5jdGlvbihhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgdmFyIGF0dHI7XG5cbiAgICBpZih0eXBlb2YgYXR0cmlidXRlID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yKGF0dHIgaW4gYXR0cmlidXRlKSB7XG4gICAgICAgIGlmIChhdHRyaWJ1dGUuaGFzT3duUHJvcGVydHkoYXR0cikgJiYgIXRoaXMuYXR0cmlidXRlc1thdHRyXSkge1xuICAgICAgICAgIHRoaXMuYXR0cmlidXRlc1thdHRyXSA9IGF0dHJpYnV0ZVthdHRyXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICB0aGlzLmF0dHJpYnV0ZXNbYXR0cmlidXRlXSA9IHZhbHVlO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgVGFnLnByb3RvdHlwZS5hZGRBdHRySWYgPSBmdW5jdGlvbihjb25kaXRpb24sIGF0dHJpYnV0ZSwgdmFsdWUpIHtcbiAgICByZXR1cm4gY29uZGl0aW9uXG4gICAgICA/IHRoaXMuYWRkQXR0cihhdHRyaWJ1dGUsIHZhbHVlKVxuICAgICAgOiB0aGlzO1xuICB9O1xuXG4gIFRhZy5wcm90b3R5cGUuYWRkQ2xhc3NJZiA9IGZ1bmN0aW9uKGNvbmRpdGlvbiwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIGNvbmRpdGlvblxuICAgICAgPyB0aGlzLmFkZENsYXNzKGNsYXNzTmFtZSlcbiAgICAgIDogdGhpcztcbiAgfTtcblxuICBUYWcucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCl7XG4gICAgdmFyIGlubmVySHRtbCA9ICcnLFxuICAgICAgaSxcbiAgICAgIGosXG4gICAgICBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzLFxuICAgICAgbWFya3VwID0gWyc8JywgdGhpcy5uYW1lXSxcbiAgICAgIGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbixcbiAgICAgIGF0dHJpYnV0ZSxcbiAgICAgIGlzU2VsZkNsb3NpbmcgPSBTRUxGX0NMT1NJTkdfVEFHUy50ZXN0KHRoaXMubmFtZSk7XG5cbiAgICBpZih3aW5kb3cgJiYgd2luZG93LmRvY3VtZW50KSB7XG4gICAgICByZXR1cm4gcmVuZGVyRE9NRnJhZ21lbnQodGhpcyk7XG4gICAgfVxuXG4gICAgaWYoYXR0cmlidXRlcykge1xuICAgICAgZm9yIChhdHRyaWJ1dGUgaW4gYXR0cmlidXRlcykge1xuICAgICAgICBpZihhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHJpYnV0ZSkgJiYgYXR0cmlidXRlc1thdHRyaWJ1dGVdKSB7XG4gICAgICAgICAgbWFya3VwLnB1c2goJyAnLCBhdHRyaWJ1dGUsICc9XCInLCBhdHRyaWJ1dGVzW2F0dHJpYnV0ZV0sICdcIicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYoaXNTZWxmQ2xvc2luZykge1xuICAgICAgbWFya3VwLnB1c2goJyAvPicpO1xuXG4gICAgICBpZihjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgWydOZXN0ZWQgY29udGVudCB3YXMgcHJvdmlkZWQgZm9yIHRoZSB0YWcgbmFtZTogJywgdGhpcy5uYW1lXS5qb2luKCcnKTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICBtYXJrdXAucHVzaCgnPicpO1xuXG4gICAgICBmb3IgKGkgPSAwLCBqID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgajsgaSArPSAxKSB7XG4gICAgICAgIC8vIEFjY291bnRpbmcgZm9yIGFscmVhZHkgcmVuZGVyZWQgdGFnc1xuICAgICAgICBpbm5lckh0bWwgKz0gdHlwZW9mIGNoaWxkcmVuW2ldID09PSAnc3RyaW5nJ1xuICAgICAgICAgID8gY2hpbGRyZW5baV1cbiAgICAgICAgICA6IGNoaWxkcmVuW2ldLnJlbmRlcigpO1xuICAgICAgfVxuXG4gICAgICBpZih0aGlzLmlubmVyVGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIG1hcmt1cC5wdXNoKHRoaXMuaW5uZXJUZXh0KTtcbiAgICAgIH1cblxuICAgICAgaWYoaW5uZXJIdG1sLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbWFya3VwLnB1c2goaW5uZXJIdG1sKTtcbiAgICAgIH1cblxuICAgICAgbWFya3VwLnB1c2goWyc8LycsIHRoaXMubmFtZSwgJz4nXS5qb2luKCcnKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmt1cC5qb2luKCcnKTtcbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IFRhZyhzZWxlY3Rvcik7XG4gIH07XG59KCkpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
